<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login Personal</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos-login.css') }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

  <div class="fondo-azul"></div>

  <div class="login-container">
    <h2>üë®‚Äç‚öïÔ∏è Acceso al Personal</h2>
    {% if error %}
    <p style="color: crimson; font-weight: bold;">{{ error }}</p>
    {% endif %}

    <form onsubmit="return mostrarCargando(event)" method="POST" action="{{ url_for('login') }}">
      
      <div class="input-group">
        <label for="usuario">Usuario</label>
        <input type="text" id="usuario" name="correo" placeholder="usuario@clinica.com" required oninput="validarCampo(this)">
      </div>

      <div class="input-group password-group">
        <label for="password">Contrase√±a</label>
        <div class="password-wrapper">
          <input type="password" id="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required oninput="validarCampo(this)">
          <span class="toggle-password" onclick="togglePassword()">üëÅÔ∏è</span>
        </div>
      </div>

      <button type="submit" id="login-btn">
        <span id="btn-texto">Ingresar</span>
      </button>

      <p class="note">Acceso exclusivo para personal autorizado</p>
    </form>
  </div>

  <script>
    function togglePassword() {
      const input = document.getElementById('password');
      input.type = input.type === 'password' ? 'text' : 'password';
    }

    function validarCampo(input) {
      if (input.value.trim() === '') {
        input.style.borderColor = 'crimson';
      } else {
        input.style.borderColor = 'seagreen';
      }
    }

    function mostrarCargando(event) {
      const usuario = document.getElementById('usuario');
      const password = document.getElementById('password');
      if (usuario.value.trim() === '' || password.value.trim() === '') {
        alert("Por favor, completa todos los campos.");
        return false;
      }

      const boton = document.getElementById('login-btn');
      const texto = document.getElementById('btn-texto');

      texto.innerHTML = 'Validando...';
      boton.disabled = true;
      boton.style.opacity = 0.7;

      // Simulaci√≥n de carga: contin√∫a despu√©s de 1.5 segundos
      setTimeout(() => {
        texto.innerHTML = 'Ingresar';
        boton.disabled = false;
        boton.style.opacity = 1;
        document.forms[0].submit(); // env√≠a el formulario manualmente
      }, 1500);

      return false; // evita el env√≠o autom√°tico para esperar la animaci√≥n
    }
  </script>

</body>
</html>

